function zeroBSCRMJS_initListView(){jQuery("#zbs-screenoptions-records-per-page").off("change").change(function(){zeroBSCRMJS_saveScreenOptions(function(){window.zbsListViewParams.retrieved=!1,zeroBSCRMJS_drawListView()})}),jQuery("#zbs-columnmanager-bottomsave").off("click").click(function(){jQuery("#zbs-open-column-manager").click()}),jQuery("#zbs-open-column-manager").off("click").click(function(){jQuery("#zbs-list-col-editor").is(":visible")?(jQuery(this).addClass("blue").removeClass("teal"),jQuery("#zbs-list-col-editor").hide()):(jQuery(this).removeClass("blue").addClass("teal"),jQuery("#zbs-list-col-editor").show())}),jQuery("#zbs-toggle-sidebar").click(function(){window.zbscrmjs_sidebarChangeBlocker||(window.zbscrmjs_sidebarChangeBlocker=!0,1==window.zbscrmjs_sidebarState?(jQuery("#zbs-list-sidebar-wrap").hide(),jQuery("#zbs-list-table-wrap").removeClass().addClass("sixteen wide column"),jQuery(this).html('<i class="toggle on icon"></i>'),window.zbscrmjs_sidebarState=-1):(jQuery("#zbs-list-sidebar-wrap").show(),jQuery("#zbs-list-table-wrap").removeClass().addClass("twelve wide column"),jQuery(this).html('<i class="toggle off icon"></i>'),window.zbscrmjs_sidebarState=1),setTimeout(function(){window.zbscrmjs_sidebarChangeBlocker=!1},0))}),void 0!==window.zbsListViewSettings&&void 0!==window.zbsListViewSettings.filters&&window.zbsListViewSettings.filters&&(jQuery("#zbs-list-view-edit-filters").click(function(){jQuery("#zbs-list-view-edit-filters-wrap, #zbs-list-filters, #zbs-list-filters-edit-title").toggle(),setTimeout(function(){jQuery("#zbs-list-view-edit-filters").hasClass("active")?jQuery("#zbs-list-view-edit-filters").removeClass("active"):jQuery("#zbs-list-view-edit-filters").addClass("active")},0)}),zeroBSCRMJS_drawFilterButtons()),jQuery("#zbs-column-manager-available-cols .zbs-column-manager-connected, #zbs-column-manager-current-cols").sortable({connectWith:".zbs-column-manager-connected",items:".zbs-column-manager-col",placeholder:"ui compact tiny button zbs-column-manager-droptarget",stop:function(e,t){zeroBSCRMJS_updateListViewColumnsVar(function(e){jQuery("#zbs-col-manager-loading").show(),jQuery("#zbsCantSaveCols").hide(),zeroBSCRMJS_updateListViewColumns(function(e){jQuery("#zbs-col-manager-loading").hide(),window.zbsListViewParams.retrieved=!1,zeroBSCRMJS_drawListView()},function(e){jQuery("#zbs-col-manager-loading").hide(),jQuery("#zbsCantSaveCols").show()})},function(e){})}}).disableSelection(),zeroBSCRMJS_drawListView(),zeroBSCRMJS_bindSideBar(),window.zbsListViewSettings.filters&&jQuery("#zbs-list-view-filter-options-current, #zbs-list-view-filter-options-available").sortable({connectWith:".zbs-filter-manager-connected",stop:function(e,t){zeroBSCRMJS_updateFilterButtonsVar(function(e){jQuery("#zbs-filter-button-manager-loading").show(),jQuery("#zbsCantSaveCols").hide(),zeroBSCRMJS_updateListViewFilterButtons(function(e){jQuery("#zbs-filter-button-manager-loading").hide(),zeroBSCRMJS_drawFilterButtons()},function(e){jQuery("#zbs-filter-button-manager-loading").hide(),jQuery("#zbsCantSaveButtons").show()})},function(e){})}}).disableSelection()}function zeroBSCRMJS_bindSideBar(){jQuery("#zbs-listview-runsearch").off("click").click(function(){zeroBSCRMJS_fireSearch()}),jQuery("#zbs-listview-search").keypress(function(e){if(13==e.which)return zeroBSCRMJS_fireSearch(),!1})}function zeroBSCRMJS_fireSearch(){var e=jQuery("#zbs-listview-search").val();""!=e&&zeroBSCRMJS_updateFilterOptionSearch(e)}function zeroBSCRMJS_listview_generateCurrentFilterURL(e,t){var i=window.zbsListViewLink,s="",n="",o="";if(window.zbsListViewSettings.tags){s="";void 0!==window.zbsListViewParams.filters.tags&&window.zbsListViewParams.filters.tags.length>0&&jQuery.each(window.zbsListViewParams.filters.tags,function(e,t){""!=s&&(s+=","),void 0!==t.term_id?s+=t.term_id:void 0!==t.id&&(s+=t.id)})}if(window.zbsListViewSettings.filters){n="";void 0!==window.zbsListViewParams.filters.quickfilters&&window.zbsListViewParams.filters.quickfilters.length>0&&jQuery.each(window.zbsListViewParams.filters.quickfilters,function(e,t){""!=n&&(n+=","),n+=t})}if(window.zbsListViewSettings.search){o="";void 0!==window.zbsListViewParams.filters.s&&""!=window.zbsListViewParams.filters.s&&(o=window.zbsListViewParams.filters.s)}return""!=s&&"undefined"!=s&&(i+=window.zbsListViewTagFilterAffix+s),""!=o&&"undefined"!=o&&(i+=window.zbsListViewSearchFilterAffix+encodeURIComponent(o)),void 0!==t&&t||""!=n&&(i+=window.zbsListViewQuickFilterAffix+n),void 0!==e&&e||void 0!==window.zbsListViewParams.sort&&(i+="&sort="+window.zbsListViewParams.sort,void 0!==window.zbsListViewParams.sortorder&&"asc"==window.zbsListViewParams.sortorder&&(i+="&sortdirection=asc")),i}function zeroBSCRMJS_updateFilterOptionSearch(e){var t=-1;if(void 0!==window.zbsListViewParams.filters.s&&(t=window.zbsListViewParams.filters.s),window.zbsListViewParams.filters.s=e,zeroBSCRMJS_isArray(window.zbsListViewParams.filters)){var i={s:e};void 0!==window.zbsListViewParams.filters.tags&&(i.tags=window.zbsListViewParams.filters.tags),window.zbsListViewParams.filters=i}-1!=t&&t==e||(window.zbsListViewParams.retrieved=!1,zeroBSCRMJS_drawListView())}function zeroBSCRMJS_writeFilterSentence(){var e="";if(void 0!==window.zbsListViewParams.filters.s&&""!=window.zbsListViewParams.filters.s&&(e+=zeroBSCRMJS_listViewLang("containing","Containing")+' "<span>'+window.zbsListViewParams.filters.s+'</span>"'),void 0!==window.zbsListViewParams.filters.tags&&window.zbsListViewParams.filters.tags.length>0){""!=e&&(e+=" and "),e+="Tagged ";var t="";jQuery.each(window.zbsListViewParams.filters.tags,function(e,i){""!=t&&(t+=", "),t+='"<span>'+i.name+'</span>"'}),e+=t}if(void 0!==window.zbsListViewParams.filters.quickfilters&&window.zbsListViewParams.filters.quickfilters.length>0){""!=e&&(e+=" and "),e+=zeroBSCRMJS_listViewLang("filteredby","Filtered by")+": ";var i="";jQuery.each(window.zbsListViewParams.filters.quickfilters,function(e,t){if(""!=i&&(i+=","),"notcontactedin"==t.substr(0,14)){var s=t.substr(14);i+=zeroBSCRMJS_listViewLang("notcontactedin","Not Contacted in")+" "+s+" "+zeroBSCRMJS_listViewLang("days","days")}else{var n=t.replace(/_/g," ");i+=zeroBSCRMJS_ucwords(n)}}),e+=i}""!=e&&(e='<h5 class="ui header blue"><i class="filter icon"></i>'+e+"</h5>"),jQuery("#zbs-listview-biline").html(e),""!=e?(jQuery("#zbs-listview-biline").show(),jQuery("#zbs-listview-clearfilters, #zbs-listview-biline").removeClass("zbs-hide").removeClass("hidden")):(jQuery("#zbs-listview-biline").hide(),jQuery("#zbs-listview-clearfilters, #zbs-listview-biline").addClass("zbs-hide").addClass("hidden"))}function zeroBSCRMJS_updateListViewColumnsVar(e,t){if(!window.zbsDrawListViewColUpdateBlocker){window.zbsDrawListViewColUpdateBlocker=!0;var i=[];jQuery("#zbs-column-manager-current-cols .zbs-column-manager-col").each(function(e,t){i.push({fieldstr:jQuery(t).attr("data-key"),namestr:jQuery(t).html()})});var s=!1;JSON.stringify(window.zbsListViewParams.columns)!==JSON.stringify(i)&&(s=!0),s?(window.zbsListViewParams.columns=i,"function"==typeof e&&e(i)):"function"==typeof t&&t(i),window.zbsDrawListViewColUpdateBlocker=!1}}function zeroBSCRMJS_updateListViewColumns(e,t){if(!window.zbsDrawListViewColUpdateAJAXBlocker){window.zbsDrawListViewColUpdateAJAXBlocker=!0;var i={action:"updateListViewColumns",sec:window.zbscrmjs_secToken,listtype:window.zbsListViewParams.listtype,v:window.zbsListViewParams.columns};jQuery.ajax({type:"POST",url:ajaxurl,data:i,dataType:"json",timeout:2e4,success:function(t){window.zbsListViewParams.columns=t,"function"==typeof e&&e(t),window.zbsDrawListViewColUpdateAJAXBlocker=!1},error:function(e){console.error("Column Data update Error: ",e),"function"==typeof t&&t(e),window.zbsDrawListViewColUpdateAJAXBlocker=!1}})}}function zeroBSCRMJS_retrieveListViewData(e,t){if(!window.zbsDrawListViewAJAXBlocker){window.zbsDrawListViewAJAXBlocker=!0;var i={action:"retrieveListViewData",sec:window.zbscrmjs_secToken,v:window.zbsListViewParams};jQuery.ajax({type:"POST",url:ajaxurl,data:i,dataType:"json",timeout:2e4,success:function(i){void 0!==i&&null!==i&&void 0!==i.objects?(window.zbsListViewData=i.objects,void 0!==i.objectcount?window.zbsListViewCount=i.objectcount:window.zbsListViewCount=0):(console.error("Failed to retrieve object data!",i),"function"==typeof t&&t(i)),"function"==typeof e&&e(i),window.zbsDrawListViewAJAXBlocker=!1},error:function(e){console.error("List View Data Retrieve Error: ",e),"function"==typeof t&&t(e),window.zbsDrawListViewAJAXBlocker=!1}})}}function zeroBSCRMJS_listViewLang(e,t){if(void 0===t)t="";return void 0!==window.zbsListViewLangLabels[e]?window.zbsListViewLangLabels[e]:t}function zeroBSCRMJS_listViewIco(e,t){if(void 0===t)t="";return void 0!==window.zbsListViewIcos[e]?window.zbsListViewIcos[e]:t}function zeroBSCRMJS_drawListView(){window.zbsDrawListViewBlocker||(jQuery("#zbsNoResults").addClass("hidden").appendTo("#zbs-list-warnings-wrap"),window.zbsDrawListViewBlocker=!0,jQuery("#zbs-list-table-wrap").html(window.zbsDrawListLoadingBoxHTML),window.zbsListViewParams.retrieved||zeroBSCRMJS_retrieveListViewData(function(e){var t={},i="";i+=zeroBSCRMJS_listViewHeader(),window.zbsListViewData.length>0?jQuery.each(window.zbsListViewData,function(e,t){i+=zeroBSCRMJS_listViewLine(t)}):jQuery("#zbsNoResults").length&&(i+='<tr><td colspan="'+window.zbsListViewParams.columns.length+'" id="zbs-no-results-wrap">',t.nores=!0,i+="</td></tr>"),i+=zeroBSCRMJS_listViewFooter(),jQuery("#zbs-list-table-wrap").html(i),setTimeout(function(){t.nores,jQuery("#zbsNoResults").appendTo("#zbs-no-results-wrap").removeClass("hidden"),zeroBSCRMJS_listViewBinds()},0),zeroBSCRMJS_writeFilterSentence(),window.zbsDrawListViewBlocker=!1},function(e){jQuery("#zbsCantLoadData").show(),jQuery("#zbs-list-table-wrap, #zbs-list-sidebar-wrap").hide(),window.zbsDrawListViewBlocker=!1}))}function zeroBSCRMJS_listViewHeader(){e="";if(window.zbsListViewParams.columns.length>0){var e='<table class="ui celled table unstackable">';e+="      <thead>",e+="        <tr>",void 0!==window.zbsBulkActions&&window.zbsBulkActions.length>0&&(e+='<th class="zbs-listview-bulk-hd"><div class="ui fitted checkbox"><input type="checkbox" id="zbsbulkmaster" /><label for="zbsbulkmaster"></label></div></th>'),jQuery.each(window.zbsListViewParams.columns,function(t,i){var s=i.namestr;if(void 0!==window.zbsSortables&&window.zbsSortables.indexOf(i.fieldstr)>-1)if(void 0!==window.zbsListViewParams.sort&&window.zbsListViewParams.sort==i.fieldstr){var n="down",o="asc";void 0!==window.zbsListViewParams.sortorder&&"asc"==window.zbsListViewParams.sortorder&&(n="up",o="desc"),s+=' <a href="'+zeroBSCRMJS_listview_generateCurrentFilterURL(!0)+"&sort="+i.fieldstr+"&sortdirection="+o+'" title="Click to Sort"><i class="angle '+n+' icon"></i></a>'}else s=' <a href="'+zeroBSCRMJS_listview_generateCurrentFilterURL(!0)+"&sort="+i.fieldstr+'" title="Click to Sort">'+s+"</a>";e+="        <th>"+s+"</th>"}),e+="      </tr></thead>",e+="      <tbody>"}return e}function zeroBSCRMJS_listViewLine(e){i="";if(window.zbsListViewParams.columns.length>0){var t="";void 0!==e.id&&(t+=' data-id="'+e.id+'"');var i="<tr"+t+">";void 0!==window.zbsBulkActions&&window.zbsBulkActions.length>0&&(i+='<td class="zbs-listview-bulk"><div class="ui fitted checkbox"><input type="checkbox" id="zbsbulk'+e.id+'" data-entityid="'+e.id+'" data-entityname="'+e.name+'" class="zbsbulkcb" /><label for="zbsbulk'+e.id+'"></label></div></td>'),jQuery.each(window.zbsListViewParams.columns,function(t,s){n="zeroBSCRMJS_listView_"+window.zbsListViewSettings.objdbname+"_"+s.fieldstr;if("function"==typeof window[n])i+=window[n](e);else{var n="zeroBSCRMJS_listView_generic_"+s.fieldstr;"function"==typeof window[n]?i+=window[n](e):void 0!==e[s.fieldstr+"_cfdate"]&&null!=e[s.fieldstr+"_cfdate"]&&"null"!=e[s.fieldstr+"_cfdate"]?i+="<td>"+e[s.fieldstr+"_cfdate"]+"</td>":void 0!==e[s.fieldstr]&&null!=e[s.fieldstr]&&"null"!=e[s.fieldstr]?i+="<td>"+e[s.fieldstr]+"</td>":i+="<td></td>"}}),i+="</tr>"}return i}function zeroBSCRMJS_listViewFooter(){var e="";if(void 0!==window.zbsListViewParams.pagination&&void 0!==window.zbsListViewCount){e+='<tfoot><tr><th colspan="'+(window.zbsListViewParams.columns.length+1)+'">';var t=1;void 0!==window.zbsListViewParams.paged&&(t=window.zbsListViewParams.paged);var i=window.zbsListViewParams.count,s=1,n=zeroBSCRMJS_listview_generateCurrentFilterURL(),o="",a="";if(window.zbsListViewCount>0&&i>0&&(s=Math.ceil(window.zbsListViewCount/i)),s>1){var r=[];if(s>1&&t>1&&(o=n+"&paged="+(t-1)),s>1&&s>=t+1&&(a=n+"&paged="+(t+1)),s<9)for(p=1;p<=s;p++){l="";p==t&&(l=" active");d={page:p,url:n+"&paged="+p,classStr:"item"+l};r.push(d)}else{for(p=1;p<=3;p++){l="";p==t&&(l=" active");d={page:p,url:n+"&paged="+p,classStr:"item"+l};r.push(d)}if(t>3&&t<s-2){d={page:!1,url:"#",classStr:"item"};r.push(d);d={page:t,url:n+"&paged="+t,classStr:"item active"};r.push(d)}d={page:!1,url:"#",classStr:"item"};for(r.push(d),p=s-2;p<=s;p++){var l="";p==t&&(l=" active");var d={page:p,url:n+"&paged="+p,classStr:"item"+l};r.push(d)}}r.length>0&&(e+='<div class="ui right floated pagination menu">',""!=o?(e+='<a class="icon item" href="'+o+'">',e+='<i class="left chevron icon"></i>',e+="</a>"):(e+='<a class="icon item disabled">',e+='<i class="left chevron icon"></i>',e+="</a>"),jQuery.each(r,function(t,i){!1!==i.page?e+='<a class="'+i.classStr+'" href="'+i.url+'">'+i.page+"</a>":e+='<a class="item disabled">...</a>'}),""!=a?(e+='<a class="icon item" href="'+a+'">',e+='<i class="right chevron icon"></i>',e+="</a>"):(e+='<a class="icon item disabled">',e+='<i class="right chevron icon"></i>',e+="</a>"),e+="</div>")}var c=window.zbsListViewObjName;(window.zbsListViewCount>1||0==window.zbsListViewCount)&&(c=window.zbsListViewObjNamePlural),e+='<div id="zbs-listview-footer-count">'+zbscrmjs_prettifyLongInts(window.zbsListViewCount)+" "+c+"</div>",e+='<div id="zbsbulkactions" style="display:none"></div>',e+="</th>",e+="</tr></tfoot>"}return e+="</tbody></table>"}function zeroBSCRMJS_listViewBinds(){jQuery("#zbsbulkmaster").change(function(){jQuery(".zbs-listview-bulk input:checkbox").prop("checked",jQuery(this).prop("checked")),setTimeout(function(){zeroBSCRMJS_listView_bulkActionsUpdate()},0)}),jQuery(".zbs-listview-bulk input:checkbox").click(function(){setTimeout(function(){zeroBSCRMJS_listView_bulkActionsUpdate()},0)}),void 0!==window.zbsListViewSettings.editinline&&window.zbsListViewSettings.editinline&&zeroBSCRMJS_bindInlineEditing();var e="";void 0!==window.zbsListViewParams&&void 0!==window.zbsListViewParams.listtype&&(e="zeroBSCRMJS_listView_postRender_"+window.zbsListViewParams.listtype),""!=e&&"function"==typeof window[e]&&window[e]()}function zeroBSCRMJS_listView_bulkActionsUpdate(){if(void 0!==window.zbsBulkActions&&window.zbsBulkActions.length>0){var e="",t=zeroBSCRMJS_listView_bulkActionsGetChecked(),i=jQuery("#zbsbulkactions");document.getElementById("zbsbulkactionmaster")?(jQuery("#selectedCount").html(t.length),innerHTML="",jQuery.each(window.zbsBulkActions,function(e,i){var s=!0;if("merge"==i&&2!=t.length&&(s=!1),s){var n="",o="zeroBSCRMJS_listView_generic_bulkActionTitle_"+i;"function"==typeof window[o]?n=window[o]():(o="zeroBSCRMJS_listView_"+window.zbsListViewSettings.objdbname+"_bulkActionTitle_"+i,n=window[o]()),""!==n&&(innerHTML+='<option value="'+i+'">'+n+"</option>")}}),jQuery("#zbsbulkactionmaster").html(innerHTML)):(e+='(<span id="selectedCount">'+t.length+"</span> selected) ",void 0!==window.zbsBulkActions&&window.zbsBulkActions.length>0&&(e+='<select id="zbsbulkactionmaster">',jQuery.each(window.zbsBulkActions,function(i,s){var n=!0;if("merge"==s&&2!=t.length&&(n=!1),n){var o="",a="zeroBSCRMJS_listView_generic_bulkActionTitle_"+s;"function"==typeof window[a]?o=window[a]():(a="zeroBSCRMJS_listView_"+window.zbsListViewSettings.objdbname+"_bulkActionTitle_"+s,o=window[a]()),""!==o&&(e+='<option value="'+s+'">'+o+"</option>")}}),e+="</select>"),e+='<button id="zbsbulkactionmastergo" class="ui tiny button primary" style="margin-left:0.4em">Go</button>',i.html(e)),i.toggle(t.length>0),setTimeout(function(){jQuery("#zbsbulkactionmastergo").off("click").click(function(){var e="zeroBSCRMJS_listView_generic_bulkActionFire_"+jQuery("#zbsbulkactionmaster").val();if("function"==typeof window[e])window[e]();else{var t="zeroBSCRMJS_listView_"+window.zbsListViewSettings.objdbname+"_bulkActionFire_"+jQuery("#zbsbulkactionmaster").val();window[t]()}})},0)}}function zeroBSCRMJS_enactBulkAction(e,t,i,s,n){if(!window.zbsDrawListViewAJAXBlocker){window.zbsDrawListViewAJAXBlocker=!0,void 0===i&&(i={});var o={action:"enactListViewBulkAction",sec:window.zbscrmjs_secToken,objtype:window.zbsListViewSettings.objdbname,actionstr:e,ids:t};o=zeroBSCRMJS_extend(o,i),jQuery.ajax({type:"POST",url:ajaxurl,data:o,dataType:"json",timeout:2e4,success:function(e){"function"==typeof s&&s(e),window.zbsDrawListViewAJAXBlocker=!1,window.zbsListViewParams.retrieved=!1,zeroBSCRMJS_drawListView()},error:function(e){"function"==typeof n&&n(e),window.zbsDrawListViewAJAXBlocker=!1}})}}function zeroBSCRMJS_listView_bulkActionsGetChecked(){var e=[];return jQuery(".zbs-listview-bulk input:checkbox").each(function(t,i){jQuery(i).is(":checked")&&e.push(jQuery(i).attr("data-entityid"))}),e}function zeroBSCRMJS_listView_bulkActionsGetCheckedIncNames(){var e=[];return jQuery(".zbs-listview-bulk input:checkbox").each(function(t,i){jQuery(i).is(":checked")&&e.push({id:jQuery(i).attr("data-entityid"),name:jQuery(i).attr("data-entityname")})}),e}function zeroBSCRMJS_listView_editURL(e){if(zbscrm_JS_DAL()>2){if(void 0!==e&&e>0)switch(window.zbsListViewParams.listtype){case"customer":return window.zbsObjectEditLinkPrefixCustomer+e;case"company":return window.zbsObjectEditLinkPrefixCompany+e;case"quote":return window.zbsObjectEditLinkPrefixQuote+e;case"invoice":return window.zbsObjectEditLinkPrefixInvoice+e;case"transaction":return window.zbsObjectEditLinkPrefixTransaction+e;case"segment":return window.zbsObjectEditLinkPrefixSegment+e;case"form":return window.zbsObjectEditLinkPrefixForm+e;case"quotetemplate":return window.zbsObjectEditLinkPrefixQuoteTemplate+e;default:return window.zbsObjectEditLinkPrefix+e}}else if(void 0!==e&&e>0)switch(window.zbsListViewParams.listtype){case"customer":return window.zbsObjectEditLinkPrefixCustomer+e;case"segment":return window.zbsObjectEditLinkPrefixCustomer+e+"&zbstype=segment";default:return window.zbsObjectEditLinkPrefix+e}return"#notfound"}function zeroBSCRMJS_listView_viewURL(e){if(zbscrm_JS_DAL()>2){if(void 0!==e&&e>0)switch(window.zbsListViewParams.listtype){case"customer":return window.zbsObjectViewLinkPrefixCustomer+e;case"company":return window.zbsObjectViewLinkPrefixCompany+e;case"quote":return window.zbsObjectViewLinkPrefixQuote+e;case"invoice":return window.zbsObjectViewLinkPrefixInvoice+e;case"transaction":return window.zbsObjectViewLinkPrefixTransaction+e;case"segment":return window.zbsObjectViewLinkPrefixSegment+e;case"form":return window.zbsObjectViewLinkPrefixForm+e;default:return window.zbsObjectEditLinkPrefix+e}}else if(void 0!==e&&e>0)switch(window.zbsListViewParams.listtype){case"customer":return window.zbsObjectViewLinkPrefixCustomer+e;case"company":return window.zbsObjectViewLinkPrefixCompany+e;default:return window.zbsObjectEditLinkPrefix+e}return"#notfound"}function zeroBSCRMJS_listView_viewURL_customer(e){return void 0!==e&&e>0?window.zbsObjectViewLinkPrefixCustomer+e:"#notfound"}function zeroBSCRMJS_listView_viewURL_company(e){return void 0!==e&&e>0?window.zbsObjectViewLinkPrefixCompany+e:"#notfound"}function zeroBSCRMJS_listView_emailURL_contact(e){return void 0!==e&&e>0?window.zbsObjectEmailLinkPrefix+e:"#notfound"}function zeroBSCRMJS_updateFilterButtonsVar(e,t){if(!window.zbsDrawFilterButtonUpdateBlocker){window.zbsDrawFilterButtonUpdateBlocker=!0;var i=[];jQuery("#zbs-list-view-filter-options-current .zbs-filter-button-manager-button").each(function(e,t){i.push({fieldstr:jQuery(t).attr("data-key"),namestr:jQuery(t).html()})});var s=!1;JSON.stringify(window.zbsFilterButtons)!==JSON.stringify(i)&&(s=!0),s?(window.zbsFilterButtons=i,"function"==typeof e&&e(i)):"function"==typeof t&&t(i),window.zbsDrawFilterButtonUpdateBlocker=!1}}function zeroBSCRMJS_updateListViewFilterButtons(e,t){if(!window.zbsDrawFilterButtonUpdateAJAXBlocker){window.zbsDrawFilterButtonUpdateAJAXBlocker=!0;var i={action:"updateListViewFilterButtons",sec:window.zbscrmjs_secToken,listtype:window.zbsListViewParams.listtype,v:window.zbsFilterButtons};jQuery.ajax({type:"POST",url:ajaxurl,data:i,dataType:"json",timeout:2e4,success:function(t){window.zbsFilterButtons=t,"function"==typeof e&&e(t),window.zbsDrawFilterButtonUpdateAJAXBlocker=!1},error:function(e){console.error("Column Data update Error: ",e),"function"==typeof t&&t(e),window.zbsDrawFilterButtonUpdateAJAXBlocker=!1}})}}function zeroBSCRMJS_drawFilterButtons(){var e="";jQuery.each(window.zbsFilterButtons,function(t,i){var s="olive",n=!1,o="&quickfilters="+i.fieldstr;void 0!==window.zbsListViewParams.filters.quickfilters&&window.zbsListViewParams.filters.quickfilters.indexOf(i.fieldstr)>-1&&(s="green",n=!0,o=""),e+='<a href="'+zeroBSCRMJS_listview_generateCurrentFilterURL(!0,n)+o+'" class="ui '+s+' button tiny">'+i.namestr+"</a>"}),jQuery("#zbs-list-filters").html(e)}function zeroBSCRMJS_listView_generic_bulkActionFire_addtag(){var e={tags:[]},t='<div id="zbs-select-tags" class="ui segment">';void 0!==window.zbsTagsForBulkActions&&window.zbsTagsForBulkActions.length>0?jQuery.each(window.zbsTagsForBulkActions,function(e,i){t+='<div class="zbs-select-tag ui label"><div class="ui checkbox"><input type="checkbox" data-tagid="'+i.id+'" id="zbs-tag-'+i.id+'" /><label for="zbs-tag-'+i.id+'">'+i.name+"</label></div></div>"}):t+='<div class="ui message"><p>'+zeroBSCRMJS_listViewLang("notags")+"</p></div>",t+="</div>",swal({title:zeroBSCRMJS_listViewLang("whichtags"),html:"<div>"+zeroBSCRMJS_listViewLang("whichtagsadd")+"<br />"+t+"</div>",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:zeroBSCRMJS_listViewLang("addthesetags"),onOpen:function(){jQuery(".zbs-select-tag input:checkbox").off("click").click(function(){jQuery(".zbs-select-tag input:checkbox").each(function(e,t){jQuery(t).is(":checked")?jQuery(t).closest(".ui.label").addClass("blue"):jQuery(t).closest(".ui.label").removeClass("blue")})})}}).then(function(t){t.value&&(e.tags=[],jQuery(".zbs-select-tag input:checkbox").each(function(t,i){jQuery(i).is(":checked")&&e.tags.push(jQuery(i).attr("data-tagid"))}),e.tags.length>0?zeroBSCRMJS_enactBulkAction("addtag",zeroBSCRMJS_listView_bulkActionsGetChecked(),e,function(e){swal(zeroBSCRMJS_listViewLang("tagsadded"),zeroBSCRMJS_listViewLang("tagsaddeddesc"),"success")},function(e){swal(zeroBSCRMJS_listViewLang("tagsnotadded"),zeroBSCRMJS_listViewLang("tagsnotaddeddesc"),"warning")}):swal(zeroBSCRMJS_listViewLang("tagsnotselected"),zeroBSCRMJS_listViewLang("tagsnotselecteddesc"),"warning"))})}function zeroBSCRMJS_listView_generic_bulkActionFire_removetag(){var e={tags:[]},t='<div id="zbs-select-tags" class="ui segment">';void 0!==window.zbsTagsForBulkActions&&window.zbsTagsForBulkActions.length>0?jQuery.each(window.zbsTagsForBulkActions,function(e,i){t+='<div class="zbs-select-tag ui label"><div class="ui checkbox"><input type="checkbox" data-tagid="'+i.id+'" id="zbs-tag-'+i.id+'" /><label for="zbs-tag-'+i.id+'">'+i.name+"</label></div></div>"}):t+='<div class="ui message"><p>'+zeroBSCRMJS_listViewLang("notags")+"</p></div>",t+="</div>",swal({title:zeroBSCRMJS_listViewLang("whichtags"),html:"<div>"+zeroBSCRMJS_listViewLang("whichtagsremove")+"<br />"+t+"</div>",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:zeroBSCRMJS_listViewLang("removethesetags"),onOpen:function(){jQuery(".zbs-select-tag input:checkbox").off("click").click(function(){jQuery(".zbs-select-tag input:checkbox").each(function(e,t){jQuery(t).is(":checked")?jQuery(t).closest(".ui.label").addClass("blue"):jQuery(t).closest(".ui.label").removeClass("blue")})})}}).then(function(t){t.value&&(e.tags=[],jQuery(".zbs-select-tag input:checkbox").each(function(t,i){jQuery(i).is(":checked")&&e.tags.push(jQuery(i).attr("data-tagid"))}),e.tags.length>0?zeroBSCRMJS_enactBulkAction("removetag",zeroBSCRMJS_listView_bulkActionsGetChecked(),e,function(e){swal(zeroBSCRMJS_listViewLang("tagsremoved"),zeroBSCRMJS_listViewLang("tagsremoveddesc"),"success")},function(e){swal(zeroBSCRMJS_listViewLang("tagsnotremoved"),zeroBSCRMJS_listViewLang("tagsnotremoveddesc"),"warning")}):swal(zeroBSCRMJS_listViewLang("tagsnotselected"),zeroBSCRMJS_listViewLang("tagsnotselecteddesc"),"warning"))})}function zeroBSCRMJS_listView_generic_bulkActionFire_export(e){var t={sec:window.zbscrmjs_secToken,objtype:window.zbsListViewSettings.objdbname,ids:zeroBSCRMJS_listView_bulkActionsGetChecked()},i="";void 0!==window.zbsListViewSettings.objdbname&&""!==window.zbsListViewSettings.objdbname&&(i="&zbstype="+window.zbsListViewSettings.objdbname),zeroBSCRMJS_genericPostData(window.zbsExportPostURL+i,"post",t)}function zeroBSCRMJS_listView_generic_bulkActionTitle_addtag(){return zeroBSCRMJS_listViewLang("addtags")}function zeroBSCRMJS_listView_generic_bulkActionTitle_removetag(){return zeroBSCRMJS_listViewLang("removetags")}function zeroBSCRMJS_listView_generic_bulkActionTitle_export(){return zeroBSCRMJS_listViewLang("export")}function zeroBSCRMJS_listView_customer_bulkActionTitle_delete(){return zeroBSCRMJS_listViewLang("deletecontacts")}function zeroBSCRMJS_listView_customer_bulkActionTitle_merge(){return zeroBSCRMJS_listViewLang("merge")}function zeroBSCRMJS_listView_customer_id(e){return"<td>#"+e.id+"</td>"}function zeroBSCRMJS_listView_customer_bulkActionFire_delete(){var e={leaveorphans:!0};swal({title:zeroBSCRMJS_listViewLang("areyousure"),html:"<div>"+zeroBSCRMJS_listViewLang("areyousurethese")+"<br /><label>"+zeroBSCRMJS_listViewLang("andthese")+'</label></div><select id="zbsbulkactiondeleteleaveorphans"><option value="1" selected="selected">'+zeroBSCRMJS_listViewLang("noleave")+'</option><option value="0">'+zeroBSCRMJS_listViewLang("yesthose")+"</option></select></div>",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete!"}).then(function(t){t.value&&(e.leaveorphans=jQuery("#zbsbulkactiondeleteleaveorphans").val(),zeroBSCRMJS_enactBulkAction("delete",zeroBSCRMJS_listView_bulkActionsGetChecked(),e,function(e){swal(zeroBSCRMJS_listViewLang("deleted"),zeroBSCRMJS_listViewLang("contactsdeleted"),"success")},function(e){swal(zeroBSCRMJS_listViewLang("notdeleted"),zeroBSCRMJS_listViewLang("notcontactsdeleted"),"warning")}))})}function zeroBSCRMJS_listView_customer_bulkActionFire_merge(){var e={dominant:-1},t=zeroBSCRMJS_listView_bulkActionsGetCheckedIncNames(),i='<select id="zbsbulkactionmergemaster">';jQuery.each(t,function(e,t){i+='<option value="'+t.id+'">'+t.name+"</option>"}),i+="</select>",swal({title:zeroBSCRMJS_listViewLang("areyousure"),html:"<div>"+zeroBSCRMJS_listViewLang("areyousurethesemerge")+"<br /><label>"+zeroBSCRMJS_listViewLang("whichdominant")+"</label></div>"+i+"</div>",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:zeroBSCRMJS_listViewLang("yesmerge")}).then(function(t){t.value&&(e.dominant=jQuery("#zbsbulkactionmergemaster").val(),zeroBSCRMJS_enactBulkAction("merge",zeroBSCRMJS_listView_bulkActionsGetChecked(),e,function(e){swal(zeroBSCRMJS_listViewLang("merged"),zeroBSCRMJS_listViewLang("contactsmerged"),"success")},function(e){swal(zeroBSCRMJS_listViewLang("notmerged"),zeroBSCRMJS_listViewLang("contactsnotmerged"),"warning")}))})}function zeroBSCRMJS_listView_generic_id(e){var t="#"+e.id;return void 0!==e.zbsid&&(t='<a href="'+zeroBSCRMJS_listView_viewURL(e.id)+'">'+t+"</a>"),"<td"+zeroBSCRMJS_listView_tdAttr("id",e,e.id)+">"+t+"</td>"}function zeroBSCRMJS_listView_generic_status(e){var t="";return void 0!==e.status&&(t=e.status),"<td"+zeroBSCRMJS_listView_tdAttr("status",e,e.status)+">"+t+"</td>"}function zeroBSCRMJS_listView_generic_added(e){var t="";return""==t&&void 0!==e.created_date&&(t=e.created_date),""==t&&void 0!==e.created&&(t=e.created),""==t&&void 0!==e.added&&(t=e.added),"<td>"+t+"</td>"}function zeroBSCRMJS_listView_generic_name(e){var t="";void 0!==e.name&&(t=e.name),""==t&&void 0!==e.title&&(t=e.title);return'<td><a href="'+zeroBSCRMJS_listView_viewURL(e.id)+'">'+t+"</a></td>"}function zeroBSCRMJS_listView_generic_nameavatar(e){var t=zeroBSCRMJS_listView_viewURL(e.id),i=zeroBSCRMJS_listView_emailURL_contact(e.id),s="";void 0!==e.email&&""!=e.email&&(s='<a href="'+i+'">'+e.email+"</a>");var n="";void 0!==e.avatar&&""!=e.avatar&&(n='<img src="'+e.avatar+'" class="ui mini rounded image">');var o="";void 0!==e.name&&""!=e.name&&(o=e.name),""==o&&void 0!==e.email&&""!=e.email&&(o=e.email);var a='<td class="name-and-avatar-list"><h4 class="ui image header">';return a+=n,a+='<div class="content"><a href="'+t+'">'+o+'</a><div class="sub header">'+s+"</div>",a+="</div></h4></td>"}function zeroBSCRMJS_listView_generic_company(e){t="<td></td>";if(void 0!==e.company&&void 0!==e.company.id)var t='<td><a href="'+zeroBSCRMJS_listView_viewURL_company(e.company.id)+'">'+e.company.name+"</a></td>";return t}function zeroBSCRMJS_listView_generic_customer(e){if(void 0!==e.customer&&null!=e.customer&&0!=e.customer&&void 0!==e.customer.id){var t=e.customer,i=zeroBSCRMJS_listView_viewURL_customer(e.customer.id),s=(zeroBSCRMJS_listView_emailURL_contact(e.customer.id),"");void 0!==t.avatar&&""!=t.avatar&&(s='<img src="'+t.avatar+'" class="ui mini rounded image">');o="";void 0!==t.fullname&&""!=t.fullname&&(o=t.fullname),""==o&&void 0!==t.email&&""!=t.email&&(o=t.email);a='<td class="name-and-avatar-list"><h4 class="ui image header">';a+=s,a+='<div class="content"><a href="'+i+'">'+o+'</a><div class="sub header"></div>',a+="</div></h4></td>"}else if(void 0!==e.company&&null!=e.company&&void 0!==e.company.id){var n=e.company,i=zeroBSCRMJS_listView_viewURL_company(e.company.id),o="";void 0!==n.fullname&&""!=n.fullname&&(o=n.fullname);var a='<td class="name-and-avatar-list"><h4 class="ui header">';a+='<i class="building icon"></i>',a+='<div class="content"><a href="'+i+'">'+o+"</a></div></h4></td>"}else a="<td>"+zeroBSCRMJS_listViewLang("nocustomer")+"</td>";return a}function zeroBSCRMJS_listView_generic_customeremail(e){if(void 0!==e.customer&&void 0!==e.customer.id){var t=e.customer,i=(zeroBSCRMJS_listView_viewURL_customer(e.customer.id),zeroBSCRMJS_listView_emailURL_contact(e.customer.id)),s="";void 0!==t.email&&""!=t.email&&(s='<a href="'+i+'">'+t.email+"</a>");var n="<td>"+s+"</td>"}else n="<td>"+zeroBSCRMJS_listViewLang("nocustomer")+"</td>";return n}function zeroBSCRMJS_listView_generic_assigned(e){var t="";return void 0!==e.owner&&void 0!==e.owner.OBJ&&void 0!==e.owner.OBJ.data&&void 0!==e.owner.OBJ.data.display_name&&(t+=e.owner.OBJ.data.display_name),void 0!==e.owner&&void 0!==e.owner.OBJ&&void 0!==e.owner.OBJ.display_name&&(t+=e.owner.OBJ.display_name),"<td>"+t+"</td>"}function zeroBSCRMJS_listView_generic_assignedobj(e){var t="";return void 0!==e.customer&&null!=e.customer&&0!=e.customer&&void 0!==e.customer.owner?void 0!==e.customer.owner&&void 0!==e.customer.owner.OBJ&&void 0!==e.customer.owner.OBJ.data&&void 0!==e.customer.owner.OBJ.data.display_name&&(t+=e.customer.owner.OBJ.data.display_name):void 0!==e.company&&null!=e.company&&void 0!==e.company.owner&&void 0!==e.company.owner&&void 0!==e.company.owner.OBJ&&void 0!==e.company.owner.OBJ.data&&void 0!==e.company.owner.OBJ.data.display_name&&(t+=e.company.owner.OBJ.data.display_name),"<td>"+t+"</td>"}function zeroBSCRMJS_listView_generic_latestlog(e){var t="";return void 0!==e.lastlog&&void 0!==e.lastlog&&void 0!==e.lastlog.type&&void 0!==e.lastlog.shortdesc&&(t+=zeroBSCRMJS_logTypeStr(e.lastlog.type)+": "+e.lastlog.shortdesc),"<td>"+t+"</td>"}function zeroBSCRMJS_listView_generic_lastcontacted(e){var t="",i=-1;if(void 0!==e.lastcontactlog&&void 0!==e.lastcontactlog.created?i=e.lastcontactlog.created:void 0!==e.lastcontacted&&(i=e.lastcontacted),-1!==i){var s=moment(i),n=moment().diff(s,"days");0==n?t=zeroBSCRMJS_listViewLang("today"):n>0&&(t=1==n?zeroBSCRMJS_listViewLang("yesterday"):n+" "+zeroBSCRMJS_listViewLang("daysago"))}return""==t&&(t=zeroBSCRMJS_listViewLang("notcontacted")),"<td>"+t+"</td>"}function zeroBSCRMJS_listView_generic_tagged(e){var t="";return void 0!==e.tags&&e.tags.length>0&&jQuery.each(e.tags,function(e,i){void 0!==i.term_id?t+='<a href="'+window.zbsTagSkipLinkPrefix+i.term_id+'" title="View all with this tag" class="ui small basic label teal">'+i.name+"</a>":void 0!==i.id&&(t+='<a href="'+window.zbsTagSkipLinkPrefix+i.id+'" title="View all with this tag" class="ui small basic label teal">'+i.name+"</a>")}),"<td>"+t+"</td>"}function zeroBSCRMJS_listView_generic_editlink(e){return'<td class="center aligned"><a href="'+zeroBSCRMJS_listView_editURL(e.id)+'" class="ui basic button"><i class="icon pencil"></i>'+zeroBSCRMJS_listViewLang("zbs_edit")+"</a></td>"}function zeroBSCRMJS_listView_generic_editdirectlink(e){return'<td class="center aligned"><a href="'+zeroBSCRMJS_listView_editURL(e.id)+'" class="ui basic button"><i class="icon pencil"></i>'+zeroBSCRMJS_listViewLang("zbs_edit")+"</a></td>"}function zeroBSCRMJS_listView_generic_editdirectlink(e){return'<td class="center aligned"><a href="'+zeroBSCRMJS_listView_editURL(e.id)+'" class="ui basic button"><i class="icon eye"></i>'+window.zbs_lang.zbs_view+"</a></td>"}function zeroBSCRMJS_listView_generic_viewlink(e){return'<td class="center aligned"><a href="'+zeroBSCRMJS_listView_viewURL(e.id)+'" class="ui basic button"><i class="icon eye"></i>'+window.zbs_lang.zbs_view+"</a></td>"}function zeroBSCRMJS_listView_generic_phonelink(e){var t="";return void 0!==e.hometel&&""!=e.hometel&&(t+='<a href="'+zeroBSCRMJS_telURLFromNo(e.hometel)+'" class="ui tiny basic button"><i class="icon call"></i> '+e.hometel+" ("+zeroBSCRMJS_listViewLang("telhome")+")</a>"),void 0!==e.worktel&&""!=e.worktel&&(t+='<a href="'+zeroBSCRMJS_telURLFromNo(e.worktel)+'" class="ui tiny basic button"><i class="icon call"></i> '+e.worktel+" ("+zeroBSCRMJS_listViewLang("telwork")+")</a>"),void 0!==e.mobtel&&""!=e.mobtel&&(t+='<a href="'+zeroBSCRMJS_telURLFromNo(e.mobtel)+'" class="ui tiny basic button"><i class="icon call"></i> '+e.mobtel+" ("+zeroBSCRMJS_listViewLang("telmob")+")</a>"),'<td class="center aligned">'+t+"</td>"}function zeroBSCRMJS_listView_customer_secaddr1(e){var t="";return void 0!==e.secaddr_addr1&&(t=e.secaddr_addr1),""==t&&void 0!==e.secaddr1&&(t=e.secaddr1),"<td>"+t+"</td>"}function zeroBSCRMJS_listView_customer_secaddr2(e){var t="";return void 0!==e.secaddr_addr2&&(t=e.secaddr_addr2),""==t&&void 0!==e.secaddr2&&(t=e.secaddr2),"<td>"+t+"</td>"}function zeroBSCRMJS_listView_customer_seccity(e){var t="";return void 0!==e.secaddr_city&&(t=e.secaddr_city),""==t&&void 0!==e.seccity&&(t=e.seccity),"<td>"+t+"</td>"}function zeroBSCRMJS_listView_customer_seccounty(e){var t="";return void 0!==e.secaddr_county&&(t=e.secaddr_county),""==t&&void 0!==e.seccounty&&(t=e.seccounty),"<td>"+t+"</td>"}function zeroBSCRMJS_listView_customer_secpostcode(e){var t="";return void 0!==e.secaddr_postcode&&(t=e.secaddr_postcode),""==t&&void 0!==e.secpostcode&&(t=e.secpostcode),"<td>"+t+"</td>"}function zeroBSCRMJS_listView_customer_seccountry(e){var t="";return void 0!==e.secaddr_country&&(t=e.secaddr_country),""==t&&void 0!==e.seccountry&&(t=e.seccountry),"<td>"+t+"</td>"}function zeroBSCRMJS_listView_customer_quotecount(e){var t="";return void 0!==e.quotes&&(t=e.quotes.length),"<td>"+t+"</td>"}function zeroBSCRMJS_listView_customer_invoicecount(e){var t="";return void 0!==e.invoices&&(t=e.invoices.length),"<td>"+t+"</td>"}function zeroBSCRMJS_listView_customer_transactioncount(e){var t="";return void 0!==e.transactions&&(t=e.transactions.length),"<td>"+t+"</td>"}function zeroBSCRMJS_listView_customer_quotetotal(e){var t="";return void 0!==e.quotestotal&&(t=e.quotestotal),"<td>"+t+"</td>"}function zeroBSCRMJS_listView_customer_invoicetotal(e){var t="";return void 0!==e.invoicestotal&&(t=e.invoicestotal),"<td>"+t+"</td>"}function zeroBSCRMJS_listView_customer_transactiontotal(e){var t="";return void 0!==e.transactionstotal&&(t=e.transactionstotal),void 0!==e.transactions_total&&(t=e.transactions_total),"<td>"+t+"</td>"}function zeroBSCRMJS_listView_customer_added(e){var t="";return""==t&&void 0!==e.created_date&&(t=e.created_date),""==t&&void 0!==e.created&&(t=e.created),""==t&&void 0!==e.added&&(t=e.added),'<td data-zbs-created-uts="'+e.createduts+'">'+t+"</td>"}function zeroBSCRMJS_listView_customer_totalvalue(e){var t="";return void 0!==e.totalvalue&&(t=e.totalvalue),"<td>"+t+"</td>"}function zeroBSCRMJS_listView_customer_name(e){var t="";void 0!==e.name&&(t=e.name);return'<td><a href="'+zeroBSCRMJS_listView_viewURL(e.id)+'">'+t+"</a></td>"}function zeroBSCRMJS_listView_customer_fname(e){return"<td>"+e.fname+"</td>"}function zeroBSCRMJS_listView_customer_lname(e){return"<td>"+e.lname+"</td>"}function zeroBSCRMJS_listView_customer_nameavatar(e){var t=zeroBSCRMJS_listView_viewURL(e.id),i=zeroBSCRMJS_listView_emailURL_contact(e.id),s="";void 0!==e.email&&""!=e.email&&(s='<a href="'+i+'">'+e.email+"</a>");var n="";void 0!==e.avatar&&""!=e.avatar&&(n='<img src="'+e.avatar+'" class="ui mini rounded image">');var o="";void 0!==e.name&&""!=e.name&&(o=e.name),""==o&&void 0!==e.email&&""!=e.email&&(o=e.email);var a='<td class="name-and-avatar-list"><h4 class="ui image header">';return a+=n,a+='<div class="content"><a href="'+t+'">'+o+'</a><div class="sub header">'+s+"</div>",a+="</div></h4></td>"}function zeroBSCRMJS_listView_customer_assigned(e){var t="",i=-1;return void 0!==e.owner&&void 0!==e.owner.ID&&(i=e.owner.ID),void 0!==e.owner&&void 0!==e.owner.OBJ&&void 0!==e.owner.OBJ.data&&void 0!==e.owner.OBJ.data.display_name&&(t+=e.owner.OBJ.data.display_name),void 0!==e.owner&&void 0!==e.owner.OBJ&&void 0!==e.owner.OBJ.display_name&&(t+=e.owner.OBJ.display_name),"<td"+zeroBSCRMJS_listView_tdAttr("assigned",e,i)+">"+t+"</td>"}function zeroBSCRMJS_listView_customer_latestlog(e){var t="";return void 0!==e.lastlog&&void 0!==e.lastlog.type&&void 0!==e.lastlog.shortdesc&&(t+=zeroBSCRMJS_logTypeStr(e.lastlog.type)+": "+e.lastlog.shortdesc),"<td>"+t+"</td>"}function zeroBSCRMJS_listView_customer_tagged(e){var t="";return void 0!==e.tags&&e.tags.length>0&&jQuery.each(e.tags,function(e,i){void 0!==i.term_id?t+='<a href="'+window.zbsTagSkipLinkPrefix+i.term_id+'" title="View all with this tag" class="ui small basic label teal">'+i.name+"</a>":void 0!==i.id&&(t+='<a href="'+window.zbsTagSkipLinkPrefix+i.id+'" title="View all with this tag" class="ui small basic label teal">'+i.name+"</a>")}),"<td>"+t+"</td>"}function zeroBSCRMJS_listView_customer_editlink(e){return'<td class="center aligned"><a href="'+zeroBSCRMJS_listView_viewURL(e.id)+'" class="ui basic button"><i class="icon eye"></i>'+window.zbs_lang.zbs_view+"</a></td>"}function zeroBSCRMJS_listView_customer_editdirectlink(e){return'<td class="center aligned"><a href="'+zeroBSCRMJS_listView_editURL(e.id)+'" class="ui basic button"><i class="icon eye"></i>'+window.zbs_lang.zbs_edit+"</a></td>"}function zeroBSCRMJS_listView_customer_hasquote(e){var t="";return void 0!==e.quotes&&0!=e.quotes&&"0"!=e.quotes&&(t='<i class="large green checkmark icon"></i>'),'<td class="center aligned">'+t+"</td>"}function zeroBSCRMJS_listView_customer_hasinvoice(e){var t="";return void 0!==e.invoices&&0!=e.invoices&&"0"!=e.invoices&&(t='<i class="large green checkmark icon"></i>'),'<td class="center aligned">'+t+"</td>"}function zeroBSCRMJS_listView_customer_phonelink(e){var t="";return void 0!==e.hometel&&""!=e.hometel&&(t+='<a href="'+zeroBSCRMJS_telURLFromNo(e.hometel)+'" class="ui tiny basic button"><i class="icon call"></i> '+e.hometel+" ("+zeroBSCRMJS_listViewLang("telhome")+")</a>"),void 0!==e.worktel&&""!=e.worktel&&(t+='<a href="'+zeroBSCRMJS_telURLFromNo(e.worktel)+'" class="ui tiny basic button"><i class="icon call"></i> '+e.worktel+" ("+zeroBSCRMJS_listViewLang("telwork")+")</a>"),void 0!==e.mobtel&&""!=e.mobtel&&(t+='<a href="'+zeroBSCRMJS_telURLFromNo(e.mobtel)+'" class="ui tiny basic button"><i class="icon call"></i> '+e.mobtel+" ("+zeroBSCRMJS_listViewLang("telmob")+")</a>"),'<td class="center aligned">'+t+"</td>"}function zbsIdentify(){return"#####zbshash#####"}function zeroBSCRMJS_listView_segment_bulkActionTitle_delete(){return zeroBSCRMJS_listViewLang("deletesegments")}function zeroBSCRMJS_listView_segment_bulkActionFire_delete(){var e={};swal({title:zeroBSCRMJS_listViewLang("areyousure"),html:"<div>"+zeroBSCRMJS_listViewLang("areyousurethese")+"</div>",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete!"}).then(function(t){t.value&&zeroBSCRMJS_enactBulkAction("delete",zeroBSCRMJS_listView_bulkActionsGetChecked(),e,function(e){swal(zeroBSCRMJS_listViewLang("deleted"),zeroBSCRMJS_listViewLang("segmentsdeleted"),"success")},function(e){swal(zeroBSCRMJS_listViewLang("notdeleted"),zeroBSCRMJS_listViewLang("notsegmentsdeleted"),"warning")})})}function zeroBSCRMJS_listView_segment_id(e){return"<td>#"+e.id+"</td>"}function zeroBSCRMJS_listView_segment_added(e){var t="";return""==t&&void 0!==e.created_date&&(t=e.created_date),""==t&&void 0!==e.createddate&&(t=e.createddate),"<td>"+t+"</td>"}function zeroBSCRMJS_listView_segment_name(e){return'<td><a href="'+zeroBSCRMJS_listView_editURL(e.id)+'">'+e.name+"</a></td>"}function zeroBSCRMJS_listView_segment_audiencecount(e){var t=window.zbsListViewLangLabels.notCompiled;void 0!==e.compilecount&&(t='<span class="ui label teal" title="'+window.zbsListViewLangLabels.lastCompiled+" "+e.lastcompileddate+'">'+e.compilecount+"</span>",void 0!==window.zbsSegmentViewStemURL&&void 0!==e.slug&&(t='<div class="ui left labeled button" title="'+window.zbsListViewLangLabels.lastCompiled+" "+e.lastcompileddate+'"><a class="ui basic right pointing label">'+e.compilecount+'</a><a href="'+window.zbsSegmentViewStemURL+e.slug+'" class="ui button"><i class="list icon"></i> '+window.zbsListViewLangLabels.view+"</a></div>"));return'<td class="center aligned">'+t+"</td>"}function zeroBSCRMJS_listView_segment_action(e){return'<td class="center aligned">'+('<a href="'+zeroBSCRMJS_listView_editURL(e.id)+'" class="ui basic button"><i class="icon edit"></i> '+zeroBSCRMJS_listViewLang("edit","Edit")+"</a>")+"</td>"}function zeroBSCRMJS_listView_quotetemplate_id(e){var t="#"+e.id;return void 0!==e.zbsid&&(t='<a href="'+zeroBSCRMJS_listView_editURL(e.id)+'">#'+e.zbsid+"</a>"),"<td"+zeroBSCRMJS_listView_tdAttr("id",e,e.id)+">"+t+"</td>"}function zeroBSCRMJS_listView_quotetemplate_title(e){var t="";if(void 0!==e.default){parseInt(e.default)>0&&(t="<br />(<i>"+zeroBSCRMJS_listViewLang("defaulttemplate","Default Template")+"</i>)")}return"<td"+zeroBSCRMJS_listView_tdAttr("title",e,e.title)+'><a href="'+zeroBSCRMJS_listView_editURL(e.id)+'">'+e.title+"</a>"+t+"</td>"}function zeroBSCRMJS_listView_quotetemplate_action(e){return'<td class="center aligned">'+('<a href="'+zeroBSCRMJS_listView_editURL(e.id)+'" class="ui basic button"><i class="icon edit"></i> '+zeroBSCRMJS_listViewLang("edit","Edit")+"</a>")+"</td>"}function zeroBSCRMJS_listView_company_coname(e){return zeroBSCRMJS_listView_company_name(e)}function zeroBSCRMJS_listView_company_name(e){var t="";void 0!==e.name&&(t=e.name);return'<td><a href="'+zeroBSCRMJS_listView_viewURL(e.id)+'">'+t+"</a></td>"}function zeroBSCRMJS_listView_company_nameavatar(e){var t=zeroBSCRMJS_listView_editURL(e.id),i=zeroBSCRMJS_listView_emailURL_contact(e.id),s="";void 0!==e.email&&""!=e.email&&(s='<a href="'+i+'">'+e.email+"</a>");var n="";void 0!==e.avatar&&""!=e.avatar&&(n='<img src="'+e.avatar+'" class="ui mini rounded image">');var o="";void 0!==e.coname&&""!=e.coname&&(o=e.coname),""==o&&void 0!==e.name&&(o=e.name),""==o&&void 0!==e.email&&""!=e.email&&(o=e.email);var a='<td class="name-and-avatar-list"><h4 class="ui image header">';return a+=n,a+='<div class="content"><a href="'+t+'">'+o+'</a><div class="sub header">'+s+"</div>",a+="</div></h4></td>"}function zeroBSCRMJS_listView_company_secaddr1(e){var t="";return void 0!==e.secaddr_addr1&&(t=e.secaddr_addr1),""==t&&void 0!==e.secaddr1&&(t=e.secaddr1),"<td>"+t+"</td>"}function zeroBSCRMJS_listView_company_secaddr2(e){var t="";return void 0!==e.secaddr_addr2&&(t=e.secaddr_addr2),""==t&&void 0!==e.secaddr2&&(t=e.secaddr2),"<td>"+t+"</td>"}function zeroBSCRMJS_listView_company_seccity(e){var t="";return void 0!==e.secaddr_city&&(t=e.secaddr_city),""==t&&void 0!==e.seccity&&(t=e.seccity),"<td>"+t+"</td>"}function zeroBSCRMJS_listView_company_seccounty(e){var t="";return void 0!==e.secaddr_county&&(t=e.secaddr_county),""==t&&void 0!==e.seccounty&&(t=e.seccounty),"<td>"+t+"</td>"}function zeroBSCRMJS_listView_company_secpostcode(e){var t="";return void 0!==e.secaddr_postcode&&(t=e.secaddr_postcode),""==t&&void 0!==e.secpostcode&&(t=e.secpostcode),"<td>"+t+"</td>"}function zeroBSCRMJS_listView_company_seccountry(e){var t="";return void 0!==e.secaddr_country&&(t=e.secaddr_country),""==t&&void 0!==e.seccountry&&(t=e.seccountry),"<td>"+t+"</td>"}function zeroBSCRMJS_listView_company_transactioncount(e){var t="";return void 0!==e.transactions&&(t=e.transactions.length),"<td>"+t+"</td>"}function zeroBSCRMJS_listView_company_transactiontotal(e){var t="";return void 0!==e.transactionstotal&&(t=e.transactionstotal),"<td>"+t+"</td>"}function zeroBSCRMJS_listView_company_phonelink(e){var t="";return void 0!==e.maintel&&""!=e.maintel&&(t+='<a href="'+zeroBSCRMJS_telURLFromNo(e.maintel)+'" class="ui tiny basic button"><i class="icon call"></i> '+e.maintel+"</a>"),void 0!==e.sectel&&""!=e.sectel&&(t+='<a href="'+zeroBSCRMJS_telURLFromNo(e.sectel)+'" class="ui tiny basic button"><i class="icon call"></i> '+e.sectel+"</a>"),'<td class="center aligned">'+t+"</td>"}function zeroBSCRMJS_listView_company_bulkActionTitle_delete(){return zeroBSCRMJS_listViewLang("deletecompanys")}function zeroBSCRMJS_listView_company_bulkActionTitle_addtag(){return zeroBSCRMJS_listViewLang("addtags")}function zeroBSCRMJS_listView_company_bulkActionTitle_removetag(){return zeroBSCRMJS_listViewLang("removetags")}function zeroBSCRMJS_listView_company_bulkActionTitle_export(){return zeroBSCRMJS_listViewLang("export")}function zeroBSCRMJS_listView_company_bulkActionFire_delete(){var e={leaveorphans:!0};swal({title:zeroBSCRMJS_listViewLang("areyousure"),html:"<div>"+zeroBSCRMJS_listViewLang("areyousurethese")+"<br /><label>"+zeroBSCRMJS_listViewLang("andthese")+'</label></div><select id="zbsbulkactiondeleteleaveorphans"><option value="1" selected="selected">'+zeroBSCRMJS_listViewLang("noleave")+'</option><option value="0">'+zeroBSCRMJS_listViewLang("yesthose")+"</option></select></div>",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:zeroBSCRMJS_listViewLang("yesdelete")}).then(function(t){t.value&&(e.leaveorphans=jQuery("#zbsbulkactiondeleteleaveorphans").val(),zeroBSCRMJS_enactBulkAction("delete",zeroBSCRMJS_listView_bulkActionsGetChecked(),e,function(e){swal(zeroBSCRMJS_listViewLang("deleted"),zeroBSCRMJS_listViewLang("companysdeleted"),"success")},function(e){swal(zeroBSCRMJS_listViewLang("notdeleted"),zeroBSCRMJS_listViewLang("notcompanysdeleted"),"warning")}))})}function zeroBSCRMJS_listView_company_bulkActionFire_addtag(){var e={tags:[]},t='<div id="zbs-select-tags" class="ui segment">';void 0!==window.zbsTagsForBulkActions&&window.zbsTagsForBulkActions.length>0?jQuery.each(window.zbsTagsForBulkActions,function(e,i){t+='<div class="zbs-select-tag ui label"><div class="ui checkbox"><input type="checkbox" data-tagid="'+i.id+'" id="zbs-tag-'+i.id+'" /><label for="zbs-tag-'+i.id+'">'+i.name+"</label></div></div>"}):t+='<div class="ui message"><p>'+zeroBSCRMJS_listViewLang("notags")+"</p></div>",t+="</div>",swal({title:zeroBSCRMJS_listViewLang("whichtags"),html:"<div>"+zeroBSCRMJS_listViewLang("whichtagsadd")+"<br />"+t+"</div>",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:zeroBSCRMJS_listViewLang("addthesetags"),onOpen:function(){jQuery(".zbs-select-tag input:checkbox").off("click").click(function(){jQuery(".zbs-select-tag input:checkbox").each(function(e,t){jQuery(t).is(":checked")?jQuery(t).closest(".ui.label").addClass("blue"):jQuery(t).closest(".ui.label").removeClass("blue")})})}}).then(function(t){t.value&&(e.tags=[],jQuery(".zbs-select-tag input:checkbox").each(function(t,i){jQuery(i).is(":checked")&&e.tags.push(jQuery(i).attr("data-tagid"))}),e.tags.length>0?zeroBSCRMJS_enactBulkAction("addtag",zeroBSCRMJS_listView_bulkActionsGetChecked(),e,function(e){swal(zeroBSCRMJS_listViewLang("tagsadded"),zeroBSCRMJS_listViewLang("tagsaddeddesc"),"success")},function(e){swal(zeroBSCRMJS_listViewLang("tagsnotadded"),zeroBSCRMJS_listViewLang("tagsnotaddeddesc"),"warning")}):swal(zeroBSCRMJS_listViewLang("tagsnotselected"),zeroBSCRMJS_listViewLang("tagsnotselecteddesc"),"warning"))})}function zeroBSCRMJS_listView_company_bulkActionFire_removetag(){var e={tags:[]},t='<div id="zbs-select-tags" class="ui segment">';void 0!==window.zbsTagsForBulkActions&&window.zbsTagsForBulkActions.length>0?jQuery.each(window.zbsTagsForBulkActions,function(e,i){t+='<div class="zbs-select-tag ui label"><div class="ui checkbox"><input type="checkbox" data-tagid="'+i.id+'" id="zbs-tag-'+i.id+'" /><label for="zbs-tag-'+i.id+'">'+i.name+"</label></div></div>"}):t+='<div class="ui message"><p>'+zeroBSCRMJS_listViewLang("notags")+"</p></div>",t+="</div>",swal({title:zeroBSCRMJS_listViewLang("whichtags"),html:"<div>"+zeroBSCRMJS_listViewLang("whichtagsremove")+"<br />"+t+"</div>",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:zeroBSCRMJS_listViewLang("removethesetags"),onOpen:function(){jQuery(".zbs-select-tag input:checkbox").off("click").click(function(){jQuery(".zbs-select-tag input:checkbox").each(function(e,t){jQuery(t).is(":checked")?jQuery(t).closest(".ui.label").addClass("blue"):jQuery(t).closest(".ui.label").removeClass("blue")})})}}).then(function(t){t.value&&(e.tags=[],jQuery(".zbs-select-tag input:checkbox").each(function(t,i){jQuery(i).is(":checked")&&e.tags.push(jQuery(i).attr("data-tagid"))}),e.tags.length>0?zeroBSCRMJS_enactBulkAction("removetag",zeroBSCRMJS_listView_bulkActionsGetChecked(),e,function(e){swal(zeroBSCRMJS_listViewLang("tagsremoved"),zeroBSCRMJS_listViewLang("tagsremoveddesc"),"success")},function(e){swal(zeroBSCRMJS_listViewLang("tagsnotremoved"),zeroBSCRMJS_listViewLang("tagsnotremoveddesc"),"warning")}):swal(zeroBSCRMJS_listViewLang("tagsnotselected"),zeroBSCRMJS_listViewLang("tagsnotselecteddesc"),"warning"))})}function zeroBSCRMJS_listView_quote_title(e){var t="";void 0!==e.name&&(t=e.name),""==t&&void 0!==e.title&&(t=e.title),""==t&&void 0!==e.id_override&&""!==e.id_override&&(t="#"+e.id_override);return'<td><strong><a href="'+zeroBSCRMJS_listView_viewURL(e.id)+'">'+t+"</a></strong></td>"}function zeroBSCRMJS_listView_quote_value(e){var t="";return""==t&&void 0!==e.value&&(t=e.value),""==t&&void 0!==e.val&&(t=e.val),"<td>"+t+"</td>"}function zeroBSCRMJS_listView_quote_status(e){var t="";return void 0!==e.status&&(t=e.status),"<td>"+t+"</td>"}function zeroBSCRMJS_listView_quote_bulkActionTitle_markaccepted(){return zeroBSCRMJS_listViewLang("markaccepted")}function zeroBSCRMJS_listView_quote_bulkActionTitle_markunaccepted(){return zeroBSCRMJS_listViewLang("markunaccepted")}function zeroBSCRMJS_listView_quote_bulkActionTitle_delete(){return zeroBSCRMJS_listViewLang("delete")}function zeroBSCRMJS_listView_quote_bulkActionTitle_export(){return zeroBSCRMJS_listViewLang("export")}function zeroBSCRMJS_listView_quote_bulkActionFire_markaccepted(){var e={};swal({title:zeroBSCRMJS_listViewLang("areyousure"),html:"<div>"+zeroBSCRMJS_listViewLang("acceptareyousurequotes")+"</div>",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:zeroBSCRMJS_listViewLang("acceptyesdoit")}).then(function(t){t.value&&(e.leaveorphans=jQuery("#zbsbulkactiondeleteleaveorphans").val(),zeroBSCRMJS_enactBulkAction("markaccepted",zeroBSCRMJS_listView_bulkActionsGetChecked(),e,function(e){swal(zeroBSCRMJS_listViewLang("acceptdeleted"),zeroBSCRMJS_listViewLang("acceptcompanysdeleted"),"success")},function(e){swal(zeroBSCRMJS_listViewLang("acceptnotdeleted"),zeroBSCRMJS_listViewLang("acceptnotcompanysdeleted"),"warning")}))})}function zeroBSCRMJS_listView_quote_bulkActionFire_markunaccepted(){var e={};swal({title:zeroBSCRMJS_listViewLang("areyousure"),html:"<div>"+zeroBSCRMJS_listViewLang("unacceptareyousurethese")+"</div>",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:zeroBSCRMJS_listViewLang("yesproceed")}).then(function(t){t.value&&(e.leaveorphans=jQuery("#zbsbulkactiondeleteleaveorphans").val(),zeroBSCRMJS_enactBulkAction("markunaccepted",zeroBSCRMJS_listView_bulkActionsGetChecked(),e,function(e){swal(zeroBSCRMJS_listViewLang("unacceptdeleted"),zeroBSCRMJS_listViewLang("unacceptcompanysdeleted"),"success")},function(e){swal(zeroBSCRMJS_listViewLang("unacceptnotdeleted"),zeroBSCRMJS_listViewLang("unacceptnotcompanysdeleted"),"warning")}))})}function zeroBSCRMJS_listView_quote_bulkActionFire_delete(){var e={};swal({title:zeroBSCRMJS_listViewLang("areyousure"),html:"<div>"+zeroBSCRMJS_listViewLang("areyousurethese")+"</div>",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:zeroBSCRMJS_listViewLang("yesdelete")}).then(function(t){t.value&&zeroBSCRMJS_enactBulkAction("delete",zeroBSCRMJS_listView_bulkActionsGetChecked(),e,function(e){swal(zeroBSCRMJS_listViewLang("deleted"),zeroBSCRMJS_listViewLang("quotesdeleted"),"success")},function(e){swal(zeroBSCRMJS_listViewLang("notdeleted"),zeroBSCRMJS_listViewLang("notquotesdeleted"),"warning")})})}function zeroBSCRMJS_listView_quotetemplate_bulkActionTitle_delete(){return zeroBSCRMJS_listViewLang("deletetemplate")}function zeroBSCRMJS_listView_quotetemplate_bulkActionFire_delete(){var e={};swal({title:zeroBSCRMJS_listViewLang("areyousure"),html:"<div>"+zeroBSCRMJS_listViewLang("areyousurethese")+"</div>",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:zeroBSCRMJS_listViewLang("yesdelete")}).then(function(t){t.value&&zeroBSCRMJS_enactBulkAction("delete",zeroBSCRMJS_listView_bulkActionsGetChecked(),e,function(e){swal(zeroBSCRMJS_listViewLang("deleted"),zeroBSCRMJS_listViewLang("quotetemplatesdeleted"),"success")},function(e){swal(zeroBSCRMJS_listViewLang("notdeleted"),zeroBSCRMJS_listViewLang("notquotetemplatesdeleted"),"warning")})})}function zeroBSCRMJS_listView_invoice_bulkActionTitle_delete(){return zeroBSCRMJS_listViewLang("delete")}function zeroBSCRMJS_listView_invoice_bulkActionTitle_export(){return zeroBSCRMJS_listViewLang("export")}function zeroBSCRMJS_listView_invoice_no(e){var t="";void 0!==e.zbsid&&(t=e.zbsid);return"<td>"+t+"</td>"}function zeroBSCRMJS_listView_invoice_date(e){var t="";void 0!==e.meta&&void 0!==e.meta.date&&(t=e.meta.date),""==t&&void 0!==e.date_date&&(t=e.date_date);return"<td>"+t+"</td>"}function zeroBSCRMJS_listView_invoice_due(e){var t="";void 0!==e.duedate&&(t=e.duedate),""==t&&void 0!==e.due_date_date&&(t=e.due_date_date);return"<td>"+t+"</td>"}function zeroBSCRMJS_listView_invoice_ref(e){var t="";void 0!==e.title&&(t=e.title),""==t&&void 0!==e.id_override&&(t=e.id_override),""==t&&void 0!==e.id&&(t=e.id);return'<td><strong><a href="'+zeroBSCRMJS_listView_viewURL(e.id)+'">'+t+"</a></strong></td>"}function zeroBSCRMJS_listView_invoice_val(e){var t="";return""==t&&void 0!==e.total&&(t=e.total),""==t&&void 0!==e.value&&(t=e.value),"<td>"+t+"</td>"}function zeroBSCRMJS_listView_invoice_value(e){var t="";return""==t&&void 0!==e.total&&(t=e.total),""==t&&void 0!==e.value&&(t=e.value),"<td>"+t+"</td>"}function zeroBSCRMJS_listView_invoice_status(e){var t="";void 0!==e.status&&(t=e.status);var i="";switch(t){case zeroBSCRMJS_listViewLang("statusdraft","Draft"):i="grey";break;case zeroBSCRMJS_listViewLang("statusunpaid","Unpaid"):i="orange";break;case zeroBSCRMJS_listViewLang("statuspaid","Paid"):i="green";break;case zeroBSCRMJS_listViewLang("statusoverdue","Overdue"):i="red"}return"<td>"+(t='<span class="ui label '+i+'">'+t+"</span>")+"</td>"}function zeroBSCRMJS_listView_invoice_bulkActionTitle_changestatus(){return zeroBSCRMJS_listViewLang("changestatus")}function zeroBSCRMJS_listView_invoice_bulkActionTitle_delete(){return zeroBSCRMJS_listViewLang("delete")}function zeroBSCRMJS_listView_invoice_bulkActionFire_changestatus(){var e={};swal({title:zeroBSCRMJS_listViewLang("areyousure"),html:"<div>"+zeroBSCRMJS_listViewLang("statusareyousurethese")+'</div><select id="zbsbulkactionnewstatus"><option value="Draft" selected="selected">'+zeroBSCRMJS_listViewLang("statusdraft")+'</option><option value="Unpaid">'+zeroBSCRMJS_listViewLang("statusunpaid")+'</option><option value="Paid">'+zeroBSCRMJS_listViewLang("statuspaid")+'</option><option value="Overdue">'+zeroBSCRMJS_listViewLang("statusoverdue")+"</option></select></div>",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:zeroBSCRMJS_listViewLang("yesupdate")}).then(function(t){t.value&&(e.newstatus=jQuery("#zbsbulkactionnewstatus").val(),zeroBSCRMJS_enactBulkAction("changestatus",zeroBSCRMJS_listView_bulkActionsGetChecked(),e,function(e){swal(zeroBSCRMJS_listViewLang("statusupdated"),zeroBSCRMJS_listViewLang("statuscompanysupdated"),"success")},function(e){swal(zeroBSCRMJS_listViewLang("statusnotupdated"),zeroBSCRMJS_listViewLang("statusnotcompanysupdated"),"warning")}))})}function zeroBSCRMJS_listView_invoice_bulkActionFire_delete(){var e={};swal({title:zeroBSCRMJS_listViewLang("areyousure"),html:"<div>"+zeroBSCRMJS_listViewLang("areyousurethese")+"</div>",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:zeroBSCRMJS_listViewLang("yesdelete")}).then(function(t){t.value&&zeroBSCRMJS_enactBulkAction("delete",zeroBSCRMJS_listView_bulkActionsGetChecked(),e,function(e){swal(zeroBSCRMJS_listViewLang("deleted"),zeroBSCRMJS_listViewLang("invoicesdeleted"),"success")},function(e){swal(zeroBSCRMJS_listViewLang("notdeleted"),zeroBSCRMJS_listViewLang("notinvoicesdeleted"),"warning")})})}function zeroBSCRMJS_listView_transaction_id(e){var t="";return""==t&&void 0!==e.id_override&&(t=e.id_override),""==t&&void 0!==e.id&&(t=e.id),void 0!==e.id&&(t='<a href="'+zeroBSCRMJS_listView_viewURL(e.id)+'">#'+t+"</a>"),"<td><strong>"+t+"</strong></td>"}function zeroBSCRMJS_listView_transaction_item(e){return zeroBSCRMJS_listView_transaction_title(e)}function zeroBSCRMJS_listView_transaction_title(e){var t="";return""==t&&void 0!==e.title&&(t=e.title),""==t&&void 0!==e.item&&(t=e.item),"<td><strong>"+t+"</strong></td>"}function zeroBSCRMJS_listView_transaction_orderid(e){var t="";return""==t&&void 0!==e.ref&&(t=e.ref),""==t&&void 0!==e.orderid&&(t=e.orderid),"<td><strong>"+t+"</strong></td>"}function zeroBSCRMJS_listView_transaction_total(e){return"<td>"+e.total+"</td>"}function zeroBSCRMJS_listView_transaction_status(e){var t="";void 0!==e.status&&(t=e.status);var i="";switch(t){case zeroBSCRMJS_listViewLang("trans_status_cancelled","Cancelled"):i="pink";break;case zeroBSCRMJS_listViewLang("trans_status_hold","Hold"):i="orange";break;case zeroBSCRMJS_listViewLang("trans_status_pending","Pending"):case zeroBSCRMJS_listViewLang("trans_status_processing","Processing"):i="teal";break;case zeroBSCRMJS_listViewLang("trans_status_refunded","Refunded"):i="orange";break;case zeroBSCRMJS_listViewLang("trans_status_failed","Failed"):i="red";break;case zeroBSCRMJS_listViewLang("trans_status_completed","Completed"):case zeroBSCRMJS_listViewLang("trans_status_succeeded","Succeeded"):i="positive"}return"<td>"+(t='<span class="ui label '+i+'">'+t+"</span>")+"</td>"}function zeroBSCRMJS_listView_transaction_date(e){var t="";return""==t&&void 0!==e.date_date&&!1!==e.date_date&&(t=e.date_date),"<td>"+t+"</td>"}function zeroBSCRMJS_listView_transaction_date_paid(e){var t="";return""==t&&void 0!==e.date_paid_date&&!1!==e.date_paid_date&&(t=e.date_paid_date),"<td>"+t+"</td>"}function zeroBSCRMJS_listView_transaction_date_completed(e){var t="";return""==t&&void 0!==e.date_completed_date&&!1!==e.date_completed_date&&(t=e.date_completed_date),"<td>"+t+"</td>"}function zeroBSCRMJS_listView_transaction_bulkActionTitle_delete(){return zeroBSCRMJS_listViewLang("delete")}function zeroBSCRMJS_listView_transaction_bulkActionTitle_addtag(){return zeroBSCRMJS_listViewLang("addtags")}function zeroBSCRMJS_listView_transaction_bulkActionTitle_removetag(){return zeroBSCRMJS_listViewLang("removetags")}function zeroBSCRMJS_listView_transaction_bulkActionTitle_export(){return zeroBSCRMJS_listViewLang("export")}function zeroBSCRMJS_listView_transaction_bulkActionFire_delete(){var e={leaveorphans:!0};swal({title:zeroBSCRMJS_listViewLang("areyousure"),html:"<div>"+zeroBSCRMJS_listViewLang("areyousurethese")+"</div>",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:zeroBSCRMJS_listViewLang("yesdelete")}).then(function(t){t.value&&zeroBSCRMJS_enactBulkAction("delete",zeroBSCRMJS_listView_bulkActionsGetChecked(),e,function(e){swal(zeroBSCRMJS_listViewLang("deleted"),zeroBSCRMJS_listViewLang("transactionsdeleted"),"success")},function(e){swal(zeroBSCRMJS_listViewLang("notdeleted"),zeroBSCRMJS_listViewLang("nottransactionsdeleted"),"warning")})})}function zeroBSCRMJS_listView_transaction_bulkActionFire_addtag(){var e={tags:[]},t='<div id="zbs-select-tags" class="ui segment">';void 0!==window.zbsTagsForBulkActions&&window.zbsTagsForBulkActions.length>0?jQuery.each(window.zbsTagsForBulkActions,function(e,i){t+='<div class="zbs-select-tag ui label"><div class="ui checkbox"><input type="checkbox" data-tagid="'+i.id+'" id="zbs-tag-'+i.id+'" /><label for="zbs-tag-'+i.id+'">'+i.name+"</label></div></div>"}):t+='<div class="ui message"><p>'+zeroBSCRMJS_listViewLang("notags")+"</p></div>",t+="</div>",swal({title:zeroBSCRMJS_listViewLang("whichtags"),html:"<div>"+zeroBSCRMJS_listViewLang("whichtagsadd")+"<br />"+t+"</div>",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:zeroBSCRMJS_listViewLang("addthesetags"),onOpen:function(){jQuery(".zbs-select-tag input:checkbox").off("click").click(function(){jQuery(".zbs-select-tag input:checkbox").each(function(e,t){jQuery(t).is(":checked")?jQuery(t).closest(".ui.label").addClass("blue"):jQuery(t).closest(".ui.label").removeClass("blue")})})}}).then(function(t){t.value&&(e.tags=[],jQuery(".zbs-select-tag input:checkbox").each(function(t,i){jQuery(i).is(":checked")&&e.tags.push(jQuery(i).attr("data-tagid"))}),e.tags.length>0?zeroBSCRMJS_enactBulkAction("addtag",zeroBSCRMJS_listView_bulkActionsGetChecked(),e,function(e){swal(zeroBSCRMJS_listViewLang("tagsadded"),zeroBSCRMJS_listViewLang("tagsaddeddesc"),"success")},function(e){swal(zeroBSCRMJS_listViewLang("tagsnotadded"),zeroBSCRMJS_listViewLang("tagsnotaddeddesc"),"warning")}):swal(zeroBSCRMJS_listViewLang("tagsnotselected"),zeroBSCRMJS_listViewLang("tagsnotselecteddesc"),"warning"))})}function zeroBSCRMJS_listView_transaction_bulkActionFire_removetag(){var e={tags:[]},t='<div id="zbs-select-tags" class="ui segment">';void 0!==window.zbsTagsForBulkActions&&window.zbsTagsForBulkActions.length>0?jQuery.each(window.zbsTagsForBulkActions,function(e,i){t+='<div class="zbs-select-tag ui label"><div class="ui checkbox"><input type="checkbox" data-tagid="'+i.id+'" id="zbs-tag-'+i.id+'" /><label for="zbs-tag-'+i.id+'">'+i.name+"</label></div></div>"}):t+='<div class="ui message"><p>'+zeroBSCRMJS_listViewLang("notags")+"</p></div>",t+="</div>",swal({title:zeroBSCRMJS_listViewLang("whichtags"),html:"<div>"+zeroBSCRMJS_listViewLang("whichtagsremove")+"<br />"+t+"</div>",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:zeroBSCRMJS_listViewLang("removethesetags"),onOpen:function(){jQuery(".zbs-select-tag input:checkbox").off("click").click(function(){jQuery(".zbs-select-tag input:checkbox").each(function(e,t){jQuery(t).is(":checked")?jQuery(t).closest(".ui.label").addClass("blue"):jQuery(t).closest(".ui.label").removeClass("blue")})})}}).then(function(t){t.value&&(e.tags=[],jQuery(".zbs-select-tag input:checkbox").each(function(t,i){jQuery(i).is(":checked")&&e.tags.push(jQuery(i).attr("data-tagid"))}),e.tags.length>0?zeroBSCRMJS_enactBulkAction("removetag",zeroBSCRMJS_listView_bulkActionsGetChecked(),e,function(e){swal(zeroBSCRMJS_listViewLang("tagsremoved"),zeroBSCRMJS_listViewLang("tagsremoveddesc"),"success")},function(e){swal(zeroBSCRMJS_listViewLang("tagsnotremoved"),zeroBSCRMJS_listViewLang("tagsnotremoveddesc"),"warning")}):swal(zeroBSCRMJS_listViewLang("tagsnotselected"),zeroBSCRMJS_listViewLang("tagsnotselecteddesc"),"warning"))})}function zeroBSCRMJS_listView_form_id(e){return'<td><a href="'+zeroBSCRMJS_listView_viewURL(e.id)+'">#'+e.id+"</a></td>"}function zeroBSCRMJS_listView_form_title(e){return'<td><strong><a href="'+zeroBSCRMJS_listView_viewURL(e.id)+'">'+e.title+"</a></strong></td>"}function zeroBSCRMJS_listView_form_style(e){if(void 0!==e.style)switch(e.style){case"naked":return'<td class="center aligned"><span class="ui label grey">'+zeroBSCRMJS_listViewLang("naked")+"</span></td>";case"cgrab":return'<td class="center aligned"><span class="ui label orange">'+zeroBSCRMJS_listViewLang("cgrab")+"</span></td>";case"simple":return'<td class="center aligned"><span class="ui label teal">'+zeroBSCRMJS_listViewLang("simple")+"</span></td>"}return'<td class="center aligned"></td>'}function zeroBSCRMJS_listView_form_bulkActionTitle_delete(){return zeroBSCRMJS_listViewLang("delete")}function zeroBSCRMJS_listView_form_bulkActionFire_delete(){var e={};swal({title:zeroBSCRMJS_listViewLang("areyousure"),html:"<div>"+zeroBSCRMJS_listViewLang("areyousurethese")+"</div>",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:zeroBSCRMJS_listViewLang("yesdelete")}).then(function(t){t.value&&zeroBSCRMJS_enactBulkAction("delete",zeroBSCRMJS_listView_bulkActionsGetChecked(),e,function(e){swal(zeroBSCRMJS_listViewLang("deleted"),zeroBSCRMJS_listViewLang("formsdeleted"),"success")},function(e){swal(zeroBSCRMJS_listViewLang("notdeleted"),zeroBSCRMJS_listViewLang("notformsdeleted"),"warning")})})}function zeroBSCRMJS_logTypeStr(e){return void 0!==window.zbsLogTypes.zerobs_customer[e]?window.zbsLogTypes.zerobs_customer[e].label:void 0!==window.zbsLogTypes.zerobs_company[e]?window.zbsLogTypes.zerobs_company[e].label:e}function zeroBSCRMJS_bindInlineEditing(){jQuery("#zbs-list-wrap td.zbs-inline-edit").off("click").click(function(){if(jQuery(this).hasClass("zbs-editing"));else{var e=jQuery(this).attr("data-col"),t=jQuery(this).attr("data-val");if(void 0!==e&&""!=e){var i="",s="zeroBSCRMJS_listView_"+window.zbsListViewSettings.objdbname+"_edit_"+e;if("function"==typeof window[s])i=window[s](t);else{s="zeroBSCRMJS_listView_generic_edit_"+e;"function"==typeof window[s]&&(i=window[s](t))}if(""!=i){var n=this;jQuery(this).html(i),jQuery(this).removeClass("zbs-inline-edit").addClass("zbs-inline-editing"),jQuery(this).off("click"),zeroBSCRMJS_listView_bindInlineEditSave(),setTimeout(function(){var e=n;jQuery("select",e).focus()},100)}}}})}function zeroBSCRMJS_listView_tdAttr(e,t,i){var s="",n="";return void 0!==window.zbsListViewSettings.editinline&&window.zbsListViewSettings.editinline&&void 0!==window.zbsListViewParams&&void 0!==window.zbsListViewParams.editinline&&void 0!==window.zbsListViewParams.editinline[e]&&1==window.zbsListViewParams.editinline[e]&&(s+="zbs-inline-edit",n+=' data-col="'+e+'"',n+=' data-val="'+i+'"'),""!=s&&(s=' class="'+s+'"'),s+n}function zeroBSCRMJS_listView_bindInlineEditSave(){jQuery(".zbs-listview-inline-edit-field").off("blur").blur(function(){var e=this,t=parseInt(jQuery(this).closest("tr").attr("data-id")),i=jQuery(this).closest(".zbs-inline-editing").attr("data-col"),s=jQuery(this).val(),n=jQuery(":selected",this).text(),o=jQuery(this).closest(".zbs-inline-editing").attr("data-val");if(s!=o)t>0&&""!=i&&zeroBSCRMJS_listView_saveInlineEdit(t,i,s,function(){var t=e,i=n;jQuery(t).closest(".zbs-inline-editing").html(i).removeClass("zbs-inline-editing").addClass("zbs-inline-edit"),zeroBSCRMJS_bindInlineEditing()},function(){swal(zeroBSCRMJS_listViewLang("couldntupdate"),zeroBSCRMJS_listViewLang("couldntupdatedeets"),"warning")});else{var a=e,r=n;jQuery(a).closest(".zbs-inline-editing").html(r).removeClass("zbs-inline-editing").addClass("zbs-inline-edit"),zeroBSCRMJS_bindInlineEditing()}})}function zeroBSCRMJS_listView_saveInlineEdit(e,t,i,s,n){if(!window.zbListViewInlineEditorAJAXBlocker){window.zbListViewInlineEditorAJAXBlocker=!0;var o={action:"zbs_list_save_inline_edit",sec:window.zbscrmjs_secToken,listtype:window.zbsListViewParams.listtype,id:e,field:t,v:i};jQuery.ajax({type:"POST",url:ajaxurl,data:o,dataType:"json",timeout:2e4,success:function(e){"function"==typeof s&&s(e),window.zbListViewInlineEditorAJAXBlocker=!1},error:function(e){"function"==typeof n&&n(e),window.zbListViewInlineEditorAJAXBlocker=!1}})}}function zeroBSCRMJS_listView_customer_edit_status(e){var t="";return window.zbsListViewInlineEdit.customer.statuses.length>0&&(t='<select class="zbs-listview-inline-edit-field">',jQuery.each(window.zbsListViewInlineEdit.customer.statuses,function(i,s){t+='<option value="'+s+'"',s==e&&(t+=' selected="selected"'),t+=">"+s+"</option>"}),t+="</select>"),t}function zeroBSCRMJS_listView_generic_edit_assigned(e){var t="";return window.zbsListViewInlineEdit.owners.length>0&&(t='<select class="zbs-listview-inline-edit-field">',jQuery.each(window.zbsListViewInlineEdit.owners,function(i,s){t+='<option value="'+s.id+'"',s.id==e&&(t+=' selected="selected"'),t+=">"+s.name+"</option>"}),t+="</select>"),t}var zbscrmjs_sidebarState=1,zbscrmjs_sidebarChangeBlocker=!1;void 0!==window.zbsListViewCount&&null!==window.zbsListViewCount||(window.zbsListViewCount=0),jQuery(document).ready(function(){void 0!==window.zbsListViewSettings&&zeroBSCRMJS_initListView()});var zbsDrawFilterButtonUpdateBlocker=!1,zbsDrawFilterButtonUpdateAJAXBlocker=!1,zbListViewInlineEditorAJAXBlocker=!1;