function zeroBSCRMJS_initEditView(){jQuery(".ui.dropdown").dropdown(),jQuery("#zbs-edit-save").off("click").click(function(){zeroBSCRMJS_buildTagsInput(),window.zbscrmjsPageChangesSave=!0,jQuery("#zbs-edit-form").submit(),setTimeout(function(){window.zbscrmjsPageChangesSave=!1},2e3)}),zeroBSCRMJS_drawEditView(),zeroBSCRMJS_preLeaveEditView()}function zeroBSCRMJS_preLeaveEditView(){jQuery(window).on("beforeunload",function(){if(Object.keys(window.zbscrmjsPageChanges).length>0&&!window.zbscrmjsPageChangesSave)return"Are you sure you want to leave, you will loose unsaved changes?"})}function zeroBSCRMJS_editViewLang(e,n){if(void 0===n)n="";return void 0!==window.zbsEditViewLangLabels[e]?window.zbsEditViewLangLabels[e]:n}function zeroBSCRMJS_drawEditView(){window.zbsDrawEditViewBlocker||(window.zbsDrawEditViewBlocker=!0,jQuery("#zbs-list-table-wrap").html(window.zbsDrawListLoadingBoxHTML),zeroBSCRMJS_buildTags(),zeroBSCRMJS_editViewBinds(),zeroBSCRMJS_hideNotificationsAfter())}function zeroBSCRMJS_editViewBinds(){}function zeroBSCRMJS_hideNotificationsAfter(){setTimeout(function(){jQuery("#zbs-edit-notification-wrap .zbs-not-urgent").slideUp(300,function(){0==jQuery("#zbs-edit-notification-wrap .ui.info:visible").length&&jQuery("#zbs-edit-notification-row").hide()})},1500)}function zeroBSCRMJS_editContactInit(){console.log("======== CUSTOMER EDIT SCRIPTS ============="),jQuery("#zbs-contact-edit-avatar").mouseenter(function(){jQuery("#zbs-edit-contact-avatar").show()}).mouseleave(function(){jQuery("#zbs-edit-contact-avatar").hide()}),jQuery("#zbs-edit-contact-avatar").click(function(e){e.preventDefault();var n=wp.media({title:window.zbsContactAvatarLang.upload,multiple:!1}).open().on("select",function(e){var i=n.state().get("selection").first().toJSON().url;jQuery("#zbs-contact-avatar-custom-url").val(i),console.log("assigned:",i),jQuery("h2",jQuery("#zbs-contact-edit-avatar")).html('<img src="'+i+'" alt="" />')})}),jQuery(".send-sms-none").on("click",function(e){console.log("SMS button clicked"),swal("Twilio Extension Needed!",'To SMS your contacts you need the <a target="_blank" style="font-weight:900;text-decoration:underline;" href="https://jetpackcrm.com/extension-bundles/">Twilio extension</a> (included in our Entrepreneurs Bundle)',"info")}),jQuery(".zbs-text-input input").keyup(function(){zeroBSCRMJS_initLinkify(this)}),jQuery(".zbs-text-input input").each(function(e,n){zeroBSCRMJS_initLinkify(n)})}function zeroBSCRMJS_initLinkify(e){var n=jQuery(e).val(),i=!1;if(n.length>5){var t=zeroBSCRMJS_retrieveURLS(n);"object"==typeof t&&"null"!=typeof t&&null!=t&&"undefined"!=t[0]&&(jQuery(".zbs-linkify",jQuery(e).parent()).remove(),jQuery(e).parent().addClass("ui action input fluid").append('<button class="ui icon button zbs-linkify" type="button" data-url="'+t[0]+'" title="Go To '+t[0]+'"><i class="linkify icon"></i></button>'),zeroBSCRMJS_bindLinkify(),i=!0)}i||(jQuery(".zbs-linkify",jQuery(e).parent()).remove(),jQuery(e).parent().removeClass("ui action input fluid"))}function zeroBSCRMJS_bindLinkify(){jQuery(".zbs-linkify").off("click").click(function(){var e=jQuery(this).attr("data-url");void 0!==e&&""!=e&&window.open(e,"_blank")})}function zbscrmjs_events_setContact(e){void 0!==e.id&&(jQuery("#zbse_customer").val(e.id),setTimeout(function(){zeroBSCRMJS_events_showContactLinkIf(e.id)},0))}function zbscrmjs_events_setCompany(e){void 0!==e.id&&(jQuery("#zbse_company").val(e.id),setTimeout(function(){zeroBSCRMJS_events_showCompanyLinkIf(e.id)},0))}function zbscrmjs_events_changeContact(e){void 0!==e&&""!=e||(jQuery("#zbse_customer").val(""),setTimeout(function(){zeroBSCRMJS_events_showContactLinkIf("")},0))}function zbscrmjs_events_changeCompany(e){void 0!==e&&""!=e||(jQuery("#zbse_company").val(""),setTimeout(function(){zeroBSCRMJS_events_showCompanyLinkIf("")},0))}function zeroBSCRMJS_events_showContactLinkIf(e){if(jQuery(".zbs-task-for .zbs-view-contact").remove(),jQuery("#zbs-event-learn-nav .zbs-quicknav-contact").remove(),void 0!==e&&null!==e&&""!==e&&(e=parseInt(e))>0){var n='<div class="ui mini animated button zbs-view-contact">';n+='<div class="visible content">'+zeroBSCRMJS_editViewLang("view","View")+"</div>",n+='<div class="hidden content">',n+='<i class="user icon"></i>',n+="</div>",n+="</div>",jQuery(".zbs-task-for").prepend(n);var i='<a target="_blank" style="margin-left:6px;" class="zbs-quicknav-contact ui icon button blue mini labeled" href="'+window.zbsObjectViewLinkPrefixCustomer+e+'"><i class="user icon"></i> '+zeroBSCRMJS_editViewLang("contact","Contact")+"</a>";jQuery("#zbs-event-learn-nav").append(i),zeroBSCRMJS_events_bindContactLinkIf()}}function zeroBSCRMJS_events_bindContactLinkIf(){jQuery(".zbs-task-for .zbs-view-contact").off("click").click(function(){var e=parseInt(jQuery("#zbse_customer").val());if(void 0!==e&&null!==e&&""!==e&&(e=parseInt(e))>0){var n=window.zbsObjectViewLinkPrefixCustomer+e;window.open(n,"_parent")}})}function zeroBSCRMJS_events_showCompanyLinkIf(e){if(jQuery(".zbs-task-for-company .zbs-view-company").remove(),jQuery("#zbs-event-learn-nav .zbs-quicknav-company").remove(),void 0!==e&&null!==e&&""!==e&&(e=parseInt(e))>0){var n='<div class="ui mini animated button zbs-view-company">';n+='<div class="visible content">'+zeroBSCRMJS_editViewLang("view","View")+"</div>",n+='<div class="hidden content">',n+='<i class="building icon"></i>',n+="</div>",n+="</div>",jQuery(".zbs-task-for-company").prepend(n);var i='<a target="_blank" style="margin-left:6px;" class="zbs-quicknav-contact ui icon button blue mini labeled" href="'+window.zbsObjectViewLinkPrefixCompany+e+'"><i class="user icon"></i> '+zeroBSCRMJS_editViewLang("company","Company")+"</a>";jQuery("#zbs-event-learn-nav").append(i),zeroBSCRMJS_events_bindCompanyLinkIf()}}function zeroBSCRMJS_events_bindCompanyLinkIf(){jQuery(".zbs-task-for-company .zbs-view-company").off("click").click(function(){var e=parseInt(jQuery("#zbse_company").val());if(void 0!==e&&null!==e&&""!==e&&(e=parseInt(e))>0){var n=window.zbsObjectViewLinkPrefixCompany+e;window.open(n,"_parent")}})}jQuery(document).ready(function(){void 0!==window.zbsEditSettings&&zeroBSCRMJS_initEditView(),void 0!==window.zbsEditSettings&&void 0!==window.zbsEditSettings.objdbname&&"contact"==window.zbsEditSettings.objdbname&&zeroBSCRMJS_editContactInit(),void 0!==window.zbsEditSettings&&void 0!==window.zbsEditSettings.objdbname&&"event"==window.zbsEditSettings.objdbname&&setTimeout(function(){zeroBSCRMJS_events_showContactLinkIf(jQuery("#zbse_customer").val()),zeroBSCRMJS_events_showCompanyLinkIf(jQuery("#zbse_company").val())},0)});var zbscrmjsPageChangesSave=!1;